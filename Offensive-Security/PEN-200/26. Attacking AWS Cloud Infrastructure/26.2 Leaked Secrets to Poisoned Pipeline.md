- _Poisoned Pipeline Execution (PPE)_ is when an attacker gains control of the build/deploy script, potentially leading to a reverse shell or secret theft.

#### Attack Scenario
1. Find info referencing a missing dependency in public repo
2. Exploit this by publishing missing package
3. This malicious package will be downloaded by builder and executed
4. After initial access, enumerate network
5. Tunnel to automation server
6. Create account 
7. Exploit plugin vulnerability to get AWS keys
8. Continue till locating S3 bucket with [_Terraform state_](https://developer.hashicorp.com/terraform/language/state) file containing admin AWS keys

#### Lab Info
|Component|Subdomain|
|---|---|
|Gitea|git.offseclab.io|
|Jenkins|automation.offseclab.io|
|Application|app.offseclab.io|
##### Configure Kali's DNS Server
Listing connections to our Kali machine 
```hlt:1
kali@kali:~$ nmcli connection
NAME                UUID                                  TYPE      DEVICE 
Wired connection 1  67f8ac63-7383-4dfd-ae42-262991b260d7  ethernet  eth0   
lo                  1284e5c4-6819-4896-8ad4-edeae32c64ce  loopback  lo 
```

Setting DNS Server
```hlt:1,3
kali@kali:~$ sudo nmcli connection modify "Wired connection 1" ipv4.dns "203.0.113.84"

kali@kali:~$ sudo systemctl restart NetworkManager
```

 Verifying Changes for DNS
 ```hlt:1,7
kali@kali:~$ cat /etc/resolv.conf
# Generated by NetworkManager
search localdomain
nameserver 203.0.113.84
...

kali@kali:~$ nslookup git.offseclab.io
Server:         203.0.113.84
Address:        203.0.113.84#53

Non-authoritative answer:
Name:   git.offseclab.io
Address: 198.18.53.73
```